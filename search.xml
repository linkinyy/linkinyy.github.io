<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>çªå‘ï¼incaseformatè •è™«ç—…æ¯’æ¥è¢­ï¼ï¼ï¼</title>
    <url>/2021/01/16/incaseformat/</url>
    <content><![CDATA[<p>2021å¹´1æœˆ13æ—¥ï¼Œä¸æ–­æœ‰å®¢æˆ·åé¦ˆç”µè„‘è¢«æ¸…é™¤ç£ç›˜æ•°æ®ï¼Œæ¶‰åŠçš„èŒƒå›´æœ‰æ”¿åºœï¼ŒåŒ»ç–—ï¼Œæ•™è‚²ç­‰è¡Œä¸šï¼Œä¸€æ—¶é—´åœ¨å„ä¸ªç¾¤é‡Œä¼ çš„æ²¸æ²¸æ‰¬æ‰¬ã€‚ç»è¿‡é‡é‡æ£€æŸ¥ï¼Œæœ€ç»ˆé”å®šåœ¨äº†åä¸ºincaseformatçš„ç—…æ¯’èº«ä¸Šã€‚</p>
<a id="more"></a>
<p><img src="/images/incaseformat/1.incaseformat.png" alt="ç½‘ä¼ ä¿¡æ¯"></p>
<h2 id="ç—…æ¯’æ¥æº"><a href="#ç—…æ¯’æ¥æº" class="headerlink" title="ç—…æ¯’æ¥æº"></a>ç—…æ¯’æ¥æº</h2><p>è¯¥ç—…æ¯’æœ€åˆåœ¨09å¹´å·¦å³å¼€å§‹å‡ºç°ï¼Œå¹¶é€šè¿‡Uç›˜æˆ–å…±äº«æ–‡ä»¶å¤¹ç­‰å½¢å¼ä¼ æ’­ã€‚<br><img src="/images/incaseformat/incaseformat%E5%87%BA%E7%8E%B0%E6%97%B6%E9%97%B4.png" alt="å‡ºç°æ—¶é—´"><br><img src="/images/incaseformat/%E7%97%85%E6%AF%92%E6%A0%B7%E4%BE%8B.png" alt="ç—…æ¯’æ ·ä¾‹"></p>
<h2 id="è¿è¡Œåˆ†æ"><a href="#è¿è¡Œåˆ†æ" class="headerlink" title="è¿è¡Œåˆ†æ"></a>è¿è¡Œåˆ†æ</h2><p>è¯¥ç—…æ¯’è¿è¡Œåˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯åœ¨éWindowsç›®å½•ä¸‹æ‰§è¡Œæ—¶ï¼Œä¸ä¼šå¯¹ç£ç›˜æ•°æ®è¿›è¡Œåˆ é™¤ï¼Œå®ƒä¼šå°†è‡ªèº«å¤åˆ¶åˆ°Windowsç›®å½•ä¸‹ï¼Œå¹¶åˆ›å»ºRunOnceæ³¨å†Œè¡¨å¼€æœºå¯åŠ¨ã€‚å¦å¤–ä¸€ç§æ˜¯åœ¨Windowsç›®å½•ä¸‹æ—¶ï¼Œä¼šå°†è‡ªèº«å¤åˆ¶ä¸€ä»½åˆ°åŒç›®å½•ï¼Œå¹¶ä¿®æ”¹æ³¨å†Œè¡¨ä¸­çš„æ•°æ®å°†æ–‡ä»¶éšè—ï¼Œéšå<br>åˆ é™¤ç³»ç»Ÿç›˜å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåœ¨æ ¹ç›®å½•ç•™ä¸‹ä¸€ä¸ªincaseformat.logæ–‡ä»¶ã€‚<br><img src="/images/incaseformat/run.png" alt="è¿è¡Œåˆ†æ1"><br><img src="/images/incaseformat/run1.png" alt="è¿è¡Œåˆ†æ2"><br>ä¸ºä½•ç—…æ¯’ä¼šåœ¨2021å¹´1æœˆ13æ—¥è¿è¡Œï¼Ÿç»è¿‡å¯¹è¯¥ç—…æ¯’é€†å‘åˆ†æï¼ŒåŸæœ¬æ˜¯åœ¨2010å¹´4æœˆ1æ—¥è¿è¡Œï¼Œä½†ç”±ç¨‹åºä¸­çš„æ—¥æœŸè½¬åŒ–ä¸çœŸå®çš„ä¸»æœºæ—¥æœŸä¸ç¬¦åˆï¼Œå¯¼è‡´æ—¶é—´è½¬æ¢ä¸º2021å¹´1æœˆ13æ—¥ã€‚æ‰€ä»¥å¯¼è‡´13æ—¥å½“å¤©å‡ºç°çš„å¤§é¢ç§¯åˆ é™¤äº‹ä»¶ã€‚<br><img src="/images/incaseformat/%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4.png" alt="è¿è¡Œæ—¶é—´"></p>
<h2 id="è¡¥æ•‘æªæ–½"><a href="#è¡¥æ•‘æªæ–½" class="headerlink" title="è¡¥æ•‘æªæ–½"></a>è¡¥æ•‘æªæ–½</h2><p>è¢«åˆ é™¤æ–‡ä»¶åï¼Œåƒä¸‡åˆ«å¯¹è¢«åˆ æ•°æ®ç£ç›˜è¿›è¡Œå†™æ“ä½œï¼Œå› ä¸ºæ•°æ®è¢«åˆ é™¤åæ²¡æœ‰çœŸæ­£çš„åˆ é™¤ï¼Œåªæ˜¯æŠŠé‚£ä¸ªåŒºåŸŸæ ‡å¿—ä¸ºé—²ç½®åŒºåŸŸï¼Œä½†æ˜¯æ•°æ®è¿˜æ˜¯åœ¨çš„ã€‚å¯æ‰¾æ•°æ®æ¢å¤ä¸“ä¸šäººå‘˜è¿›è¡Œè¡¥æ•‘ï¼Œè‹¥è‡ªå·±äº†è§£æ•°æ®æ¢å¤ç›¸å…³æ“ä½œï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç”¨è½¯ä»¶è¿›è¡Œæ¢å¤ã€‚</p>
]]></content>
      <categories>
        <category>æœ¨é©¬ç—…æ¯’</category>
      </categories>
      <tags>
        <tag>ç—…æ¯’</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxè¿œç¨‹è¿æ¥windows</title>
    <url>/2021/01/13/linux-windows/</url>
    <content><![CDATA[<p>æœ€è¿‘æœ‰ä¸ªé¡¹ç›®ï¼Œéœ€è¦è¿œç¨‹è¿æ¥windows 10ç‰ˆæœ¬ï¼Œæ‰§è¡Œå‘½ä»¤å¹¶è¿”å›ã€‚åˆšå¼€å§‹æƒ³çš„ç”¨winexeå»åšï¼Œä½†æ˜¯winexeåªæ”¯æŒsmbv1ç‰ˆæœ¬çš„åè®®ï¼Œå¤§éƒ¨åˆ†windows 10å·²ç»æ˜¯smbv2åŠæ›´é«˜ã€‚ç¢°å·§çš„æ˜¯ï¼Œé—²é€›githubçš„æ—¶å€™å±…ç„¶æ‰¾åˆ°ä¸€ä½<a href="https://github.com/jborean93/pypsexec">å›½å¤–å°å“¥</a>å®ç°å¥½çš„åŠŸèƒ½ï¼Œè¿™è¿™è¿™â€¦ é‚è®°å½•æ­¤æ–‡ç« ã€‚</p>
<a id="more"></a>
<h2 id="å®‰è£…pypsexec"><a href="#å®‰è£…pypsexec" class="headerlink" title="å®‰è£…pypsexec"></a>å®‰è£…pypsexec</h2><p>è”ç½‘çš„æƒ…å†µä¸‹ç›´æ¥ç”¨pipå®‰è£…</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pypsexec</span><br></pre></td></tr></table></figure>
<p>æ²¡ç½‘çš„å°ä¼™ä¼´å¯ä¾æ¬¡ä¸‹è½½pyspnegoã€smbprotocolã€pypsexecï¼Œè¿›å…¥ç›®å½•æ‰§è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<h2 id="è¿æ¥æ“ä½œ"><a href="#è¿æ¥æ“ä½œ" class="headerlink" title="è¿æ¥æ“ä½œ"></a>è¿æ¥æ“ä½œ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pypsexec.client <span class="keyword">import</span> Client</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cmd_line</span>(<span class="params">host, username, password, cmd</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># åˆ›ç«‹è¿æ¥</span></span><br><span class="line">        c = Client(hostname=host, username=username, password=password)</span><br><span class="line">        <span class="comment"># è¿æ¥smbv1ç‰ˆæœ¬çš„æœºå™¨å¯ä»¥å°†encrypté€‰é¡¹è®¾ç½®false</span></span><br><span class="line">        <span class="comment"># c = Client(hostname=host, username=username, password=password,encrypt=False)</span></span><br><span class="line">        <span class="comment"># è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">        c.connect(timeout=<span class="number">5</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºæœåŠ¡</span></span><br><span class="line">        c.create_service()</span><br><span class="line">        cmd = cmd</span><br><span class="line">        <span class="comment"># æ‰§è¡Œcmdå‘½ä»¤å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">        stdout, stderr, rc = c.run_executable(<span class="string">&quot;cmd.exe&quot;</span>,</span><br><span class="line">                                            arguments= <span class="string">&quot;/c &quot;</span> + cmd)</span><br><span class="line">        recv = stdout.decode()</span><br><span class="line">        print(recv)</span><br><span class="line">        <span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line">        c.remove_service()</span><br><span class="line">        c.disconnect()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(e)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    host = <span class="string">&quot;hostname&quot;</span></span><br><span class="line">    username = <span class="string">&quot;username&quot;</span></span><br><span class="line">    password = <span class="string">&quot;password&quot;</span></span><br><span class="line">    cmd = <span class="string">&quot;whoami&quot;</span></span><br><span class="line">    cmd_line(host, username, password, cmd)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­hostä¸ºç›®æ ‡ipï¼Œusernameå’Œpasswordå¯¹åº”ç›®æ ‡ç”¨æˆ·åå’Œå¯†ç ï¼Œcmdä¸ºè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<h3 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h3><p><img src="/images/linux-windows/1.results.png" alt="results1"><br><img src="/images/linux-windows/2.results.png" alt="results2"></p>
<h2 id="é”™è¯¯æç¤º"><a href="#é”™è¯¯æç¤º" class="headerlink" title="é”™è¯¯æç¤º"></a>é”™è¯¯æç¤º</h2><h3 id="é”™è¯¯1ï¼š"><a href="#é”™è¯¯1ï¼š" class="headerlink" title="é”™è¯¯1ï¼š"></a>é”™è¯¯1ï¼š</h3><p><img src="/images/linux-windows/1.error.png" alt="error1"><br>è¯¥é”™è¯¯æ˜¯ç”±äºç”¨æˆ·åæˆ–å¯†ç é”™è¯¯å¯¼è‡´ã€‚</p>
<h3 id="é”™è¯¯2ï¼š"><a href="#é”™è¯¯2ï¼š" class="headerlink" title="é”™è¯¯2ï¼š"></a>é”™è¯¯2ï¼š</h3><p><img src="/images/linux-windows/2.error.png" alt="error2"><br>è¯¥é”™è¯¯æ˜¯ç”±äºç›®æ ‡é˜²ç«å¢™æˆ–UCAæ²¡å…³ï¼Œéœ€è¦å…³é—­ç›®æ ‡ä¸»æœºé˜²ç«å¢™å¹¶åœ¨powershellä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$reg_path</span> = <span class="string">&quot;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&quot;</span></span><br><span class="line"><span class="variable">$reg_prop_name</span> = <span class="string">&quot;LocalAccountTokenFilterPolicy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$reg_key</span> = <span class="built_in">Get-Item</span> <span class="literal">-Path</span> <span class="variable">$reg_path</span></span><br><span class="line"><span class="variable">$reg_prop</span> = <span class="variable">$reg_key</span>.GetValue(<span class="variable">$reg_prop_name</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$null</span> <span class="operator">-ne</span> <span class="variable">$reg_prop</span>) &#123;</span><br><span class="line">    <span class="built_in">Remove-ItemProperty</span> <span class="literal">-Path</span> <span class="variable">$reg_path</span> <span class="literal">-Name</span> <span class="variable">$reg_prop_name</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">New-ItemProperty</span> <span class="literal">-Path</span> <span class="variable">$reg_path</span> <span class="literal">-Name</span> <span class="variable">$reg_prop_name</span> <span class="literal">-Value</span> <span class="number">1</span> <span class="literal">-PropertyType</span> DWord</span><br><span class="line"></span><br><span class="line"><span class="variable">$reg_path</span> = <span class="string">&quot;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&quot;</span></span><br><span class="line"><span class="variable">$reg_prop_name</span> = <span class="string">&quot;EnableLUA&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$reg_key</span> = <span class="built_in">Get-Item</span> <span class="literal">-Path</span> <span class="variable">$reg_path</span></span><br><span class="line"><span class="variable">$reg_prop</span> = <span class="variable">$reg_key</span>.GetValue(<span class="variable">$reg_prop_name</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$null</span> <span class="operator">-ne</span> <span class="variable">$reg_prop</span>) &#123;</span><br><span class="line">    <span class="built_in">Remove-ItemProperty</span> <span class="literal">-Path</span> <span class="variable">$reg_path</span> <span class="literal">-Name</span> <span class="variable">$reg_prop_name</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">New-ItemProperty</span> <span class="literal">-Path</span> <span class="variable">$reg_path</span> <span class="literal">-Name</span> <span class="variable">$reg_prop_name</span> <span class="literal">-Value</span> <span class="number">0</span> <span class="literal">-PropertyType</span> DWord</span><br></pre></td></tr></table></figure>
<h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>å¦‚æœç›®æ ‡ä¸»æœºä½¿ç”¨çš„ä¸æ˜¯smbv2ç‰ˆæœ¬ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨winexeè¿œç¨‹è¿æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä½¿ç”¨è¯¥æ¨¡å—éœ€è¦æ“ä½œçš„æ­¥éª¤æœ‰ç‚¹å¤šã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å®‰å…¨å¼€å‘</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>è·å–IPV4/IPV6ä¸»æœºsnmpä¿¡æ¯</title>
    <url>/2021/01/30/snmp/</url>
    <content><![CDATA[<p>snmpæŒ‡çš„æ˜¯ç®€å•ç½‘ç»œç®¡ç†åè®®ï¼Œå±äºåº”ç”¨å±‚åè®®ï¼Œä¸»è¦æä¾›ç›‘æ§å’Œç®¡ç†ç½‘ç»œè®¾å¤‡çš„ç³»ç»Ÿæ–¹æ³•ã€‚ä¸€èˆ¬é€šè¿‡snmpè·å–ç›®æ ‡ä¸»æœºä¿¡æ¯ã€‚</p>
<a id="more"></a>
<p>è·å–snmpä¿¡æ¯éœ€è¦åˆ©ç”¨snmpwalkï¼Œsnmwalkæ˜¯snmpçš„ä¸€ä¸ªå·¥å…·ï¼Œé€šè¿‡æŒ‡å®šoidå¯ä»¥è¿œç¨‹è·å–snmpä¿¡æ¯ã€‚</p>
<h2 id="snmpå®‰è£…"><a href="#snmpå®‰è£…" class="headerlink" title="snmpå®‰è£…"></a>snmpå®‰è£…</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install net-snmp*</span><br><span class="line"></span><br><span class="line">cd /etc/snmp</span><br><span class="line"></span><br><span class="line">vi snmpd.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨æ–‡ä»¶æœ€åä¸€è¡Œæ·»åŠ ä»¥ä¸‹ä¿¡æ¯,éœ€è¦å“ªä¸ªå°±æ·»åŠ å“ªä¸ª,ä¸ç”¨å…¨éƒ¨æ·»åŠ </span></span><br><span class="line">rwcommunity public # è®¾ç½®snmpæ”¯æŒipv4</span><br><span class="line">rwcommunity6 public # è®¾ç½®snmpæ”¯æŒipv6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€€å‡ºæ–‡ä»¶ç¼–è¾‘æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line">snmpd udp6:161 </span><br><span class="line"></span><br><span class="line">service snmpd restart</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œå®Œåï¼Œå°±å¯ä»¥æ‰§è¡Œsnmpwalkäº†ã€‚</p>
<h2 id="snmpwalkä½¿ç”¨"><a href="#snmpwalkä½¿ç”¨" class="headerlink" title="snmpwalkä½¿ç”¨"></a>snmpwalkä½¿ç”¨</h2><p>å¸¸ç”¨snmpwalkå‘½ä»¤æ ¼å¼ä¸º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip oid</span><br></pre></td></tr></table></figure>
<p>-c : snmpå›¢ä½“å  ä¸€èˆ¬ä¸ºpublic<br>-v : æŒ‡å®šsnmpç‰ˆæœ¬  1|2c|3 ç°åœ¨å¤§éƒ¨åˆ†éƒ½æ˜¯2c<br>ip : ç›®æ ‡ipv4æˆ–ipv6åœ°å€<br>oid : å…·ä½“oidå·</p>
<p>æ­¤å¤–è¿˜æœ‰ä»¥ä¸‹å¸¸ç”¨å‚æ•°ï¼š<br>-r : æŒ‡å®šè¿æ¥æ¬¡æ•°<br>-t : æŒ‡å®šè¶…æ—¶æ—¶é—´</p>
<h3 id="è·å–ç›®æ ‡ç«¯å£ä¿¡æ¯"><a href="#è·å–ç›®æ ‡ç«¯å£ä¿¡æ¯" class="headerlink" title="è·å–ç›®æ ‡ç«¯å£ä¿¡æ¯"></a>è·å–ç›®æ ‡ç«¯å£ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.6.13.1.3</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç›®æ ‡ç³»ç»ŸåŸºæœ¬ä¿¡æ¯"><a href="#è·å–ç›®æ ‡ç³»ç»ŸåŸºæœ¬ä¿¡æ¯" class="headerlink" title="è·å–ç›®æ ‡ç³»ç»ŸåŸºæœ¬ä¿¡æ¯"></a>è·å–ç›®æ ‡ç³»ç»ŸåŸºæœ¬ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.1.1.0</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç›®æ ‡æœºå™¨å"><a href="#è·å–ç›®æ ‡æœºå™¨å" class="headerlink" title="è·å–ç›®æ ‡æœºå™¨å"></a>è·å–ç›®æ ‡æœºå™¨å</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.1.5.0</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç³»ç»Ÿcpuç™¾åˆ†ç™¾"><a href="#è·å–ç³»ç»Ÿcpuç™¾åˆ†ç™¾" class="headerlink" title="è·å–ç³»ç»Ÿcpuç™¾åˆ†ç™¾"></a>è·å–ç³»ç»Ÿcpuç™¾åˆ†ç™¾</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.4.1.2021.11.11.0</span><br></pre></td></tr></table></figure>
<h3 id="è·å–å®‰è£…è½¯ä»¶ç›®å½•"><a href="#è·å–å®‰è£…è½¯ä»¶ç›®å½•" class="headerlink" title="è·å–å®‰è£…è½¯ä»¶ç›®å½•"></a>è·å–å®‰è£…è½¯ä»¶ç›®å½•</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.25.6.3.1.2</span><br></pre></td></tr></table></figure>
<h3 id="è·å–å­˜å‚¨è®¾å¤‡ä¿¡æ¯"><a href="#è·å–å­˜å‚¨è®¾å¤‡ä¿¡æ¯" class="headerlink" title="è·å–å­˜å‚¨è®¾å¤‡ä¿¡æ¯"></a>è·å–å­˜å‚¨è®¾å¤‡ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.25.2.3.1.3</span><br></pre></td></tr></table></figure>
<h3 id="è·å–æœåŠ¡å’Œè¿›ç¨‹åˆ—è¡¨"><a href="#è·å–æœåŠ¡å’Œè¿›ç¨‹åˆ—è¡¨" class="headerlink" title="è·å–æœåŠ¡å’Œè¿›ç¨‹åˆ—è¡¨"></a>è·å–æœåŠ¡å’Œè¿›ç¨‹åˆ—è¡¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.25.4.2.1.2</span><br></pre></td></tr></table></figure>
<h3 id="è·å–è·¯ç”±è¡¨"><a href="#è·å–è·¯ç”±è¡¨" class="headerlink" title="è·å–è·¯ç”±è¡¨"></a>è·å–è·¯ç”±è¡¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.4.21</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç½‘ç»œæ¥å£"><a href="#è·å–ç½‘ç»œæ¥å£" class="headerlink" title="è·å–ç½‘ç»œæ¥å£"></a>è·å–ç½‘ç»œæ¥å£</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">snmpwalk -c public -v 2c ip 1.3.6.1.2.1.2.2.1.2</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼šè‹¥éœ€è¦ä½¿ç”¨ipv6è·å–ç›®æ ‡æ•°æ®ï¼Œå°†ipæ”¹ä¸ºipv6æ ¼å¼å³å¯</strong><br><img src="/images/snmp/ipv6.png" alt="ipv6"></p>
<h2 id="pythonè·å–snmpä¿¡æ¯"><a href="#pythonè·å–snmpä¿¡æ¯" class="headerlink" title="pythonè·å–snmpä¿¡æ¯"></a>pythonè·å–snmpä¿¡æ¯</h2><p>æ—¢ç„¶æ˜¯è·å–ç›®æ ‡ä¸»æœºä¿¡æ¯ï¼Œæ€ä¹ˆå°‘çš„äº†pythonğŸ˜ã€‚</p>
<h3 id="å®‰è£…pysnmpåŒ…"><a href="#å®‰è£…pysnmpåŒ…" class="headerlink" title="å®‰è£…pysnmpåŒ…"></a>å®‰è£…pysnmpåŒ…</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pysnmp</span><br></pre></td></tr></table></figure>
<p>æ²¡ç½‘çš„æƒ…å†µä¸‹éœ€è¦ä¸‹è½½pycryptodomexå’Œpysnmpå®‰è£…åŒ…ï¼Œå¹¶åˆ†åˆ«è¿›å…¥ç›®å½•è¿è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><p>è¿™é‡Œç›´æ¥ç”¨å†™å¥½çš„æ¨¡æ¿ï¼Œè¯¦æƒ…è¯·å‚è€ƒ<a href="https://github.com/etingof/pysnmp">pysnmp</a>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pysnmp.hlapi <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">iterator = getCmd(SnmpEngine(),</span><br><span class="line">                  CommunityData(<span class="string">&#x27;public&#x27;</span>),</span><br><span class="line">                  UdpTransportTarget((<span class="string">&#x27;10.11.29.4&#x27;</span>, <span class="number">161</span>)),</span><br><span class="line">                  ContextData(),</span><br><span class="line">                  ObjectType(ObjectIdentity(<span class="string">&#x27;SNMPv2-MIB&#x27;</span>, <span class="string">&#x27;sysDescr&#x27;</span>, <span class="number">0</span>)))</span><br><span class="line"></span><br><span class="line">errorIndication, errorStatus, errorIndex, varBinds = <span class="built_in">next</span>(iterator)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> errorIndication:  <span class="comment"># SNMP engine errors</span></span><br><span class="line">    print(errorIndication)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> errorStatus:  <span class="comment"># SNMP agent errors</span></span><br><span class="line">        print(<span class="string">&#x27;%s at %s&#x27;</span> % (errorStatus.prettyPrint(), varBinds[<span class="built_in">int</span>(errorIndex)-<span class="number">1</span>] <span class="keyword">if</span> errorIndex <span class="keyword">else</span> <span class="string">&#x27;?&#x27;</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> varBind <span class="keyword">in</span> varBinds:  <span class="comment"># SNMP response contents</span></span><br><span class="line">            print(<span class="string">&#x27; = &#x27;</span>.join([x.prettyPrint() <span class="keyword">for</span> x <span class="keyword">in</span> varBind]))</span><br></pre></td></tr></table></figure>
<p>CommunityDataæŒ‡å®šå›¢ä½“åã€‚<br>UdpTransportTargetæŒ‡å®šç›®æ ‡ipå’Œç«¯å£ã€‚<br>ObjectTypeå¯ä»¥æŒ‡å®šoidï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåç§°ï¼Œå…·ä½“å¯è·Ÿè¿›ObjectIdentityæŸ¥çœ‹ç¤ºä¾‹ã€‚<br><img src="/images/snmp/%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.png" alt="è¿è¡Œç»“æœ"></p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨ipv6çš„è¯ï¼Œå¼•å…¥Udp6TransportTargetï¼Œå…¶å®ƒå†…å®¹ä¿æŒä¸å˜ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pysnmp.hlapi <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> pysnmp.hlapi.asyncore <span class="keyword">import</span> Udp6TransportTarget</span><br><span class="line">iterator = getCmd(SnmpEngine(),</span><br><span class="line">                  CommunityData(<span class="string">&#x27;public&#x27;</span>),</span><br><span class="line">                  Udp6TransportTarget((<span class="string">&#x27;ipv6address&#x27;</span>, <span class="number">161</span>)),</span><br><span class="line">                  ContextData(),</span><br><span class="line">                  ObjectType(ObjectIdentity(<span class="string">&#x27;SNMPv2-MIB&#x27;</span>, <span class="string">&#x27;sysDescr&#x27;</span>, <span class="number">0</span>)))</span><br><span class="line"></span><br><span class="line">errorIndication, errorStatus, errorIndex, varBinds = <span class="built_in">next</span>(iterator)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> errorIndication:  <span class="comment"># SNMP engine errors</span></span><br><span class="line">    print(errorIndication)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> errorStatus:  <span class="comment"># SNMP agent errors</span></span><br><span class="line">        print(<span class="string">&#x27;%s at %s&#x27;</span> % (errorStatus.prettyPrint(), varBinds[<span class="built_in">int</span>(errorIndex)-<span class="number">1</span>] <span class="keyword">if</span> errorIndex <span class="keyword">else</span> <span class="string">&#x27;?&#x27;</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> varBind <span class="keyword">in</span> varBinds:  <span class="comment"># SNMP response contents</span></span><br><span class="line">            print(<span class="string">&#x27; = &#x27;</span>.join([x.prettyPrint() <span class="keyword">for</span> x <span class="keyword">in</span> varBind]))</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ä¸»æœºä¿¡æ¯æ”¶é›†</category>
      </categories>
      <tags>
        <tag>å®‰å…¨å¼€å‘</tag>
        <tag>Python</tag>
      </tags>
  </entry>
</search>
